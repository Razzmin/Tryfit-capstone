<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<title>Body Distance & Measurement Guide — Smart Setup</title>

<link rel="stylesheet" href="mediapipe-styles.css">
<link href="https://fonts.googleapis.com/css2?family=Krona+One&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
</head>


<body>
<div id="videoContainer">
  <video id="videoElement" autoplay playsinline muted></video>
  <canvas id="overlay"></canvas>
</div>

<div id="userMessage">Let’s measure your shoulder, chest, hips, and bust so we can recommend the best size just for you.</div>
<div id="guidance">Step back or move forward until you fit the guide.</div>
<div id="countdown"></div>
<div id="results"></div>

<div class="action-buttons">
  <button id="saveBtn">Save</button>
  <button id="retakeBtn">Retake</button>
</div>

<div id="popup" style="display:flex;">
  <div id="popupCard" role="dialog" aria-modal="true" aria-label="Smart setup">
    <button id="infoBtn">?</button>
    <h2>Smart Setup</h2>
    <small>To get the best fit, we’ll use your camera and a few basic measurements.
      You can skip calibration, but doing it makes your results extra precise!</small>

    <input id="heightInput" type="number" placeholder="Height (cm) — required" min="100" max="250" />
    <input id="weightInput" type="number" placeholder="Weight (kg) — required" min="30" max="200" />
    <input id="waistInput" type="number" placeholder="Waistline (cm) — required" min="40" max="150" />
    <label class="muted">Calibration’s optional, but entering your real sizes helps us measure you accurately!</label>
    <input id="cal_shoulder" type="number" placeholder="Actual shoulder width (cm)" min="20" max="70" />
    <input id="cal_chest" type="number" placeholder="Actual chest (cm)" min="60" max="150" />
    <input id="cal_hips" type="number" placeholder="Actual hips (cm)" min="60" max="150" />
    <input id="cal_bust" type="number" placeholder="Actual bust (cm)" min="60" max="150" />
    <button id="startBtn">Start Measurement</button>
  </div>
</div>

<div id="infoPopup">
  <div id="infoContent">
    <h3>What is Calibration?</h3>
    <p>Calibration helps your camera learn your body’s real proportions.<br><br>
    If you enter your actual measurements (like shoulder, chest width, hips, or bust), the system adjusts to your unique size automatically next time.<br><br>
    You only need to do this once per device for the best accuracy.</p>
    <button id="closeInfo">Got it</button>
  </div>
</div>

<div id="popupNotification" style="position:fixed;inset:0;display:none;background:rgba(0,0,0,0.8);align-items:center;justify-content:center;z-index:500;">
  <div style="background:#fff;color:#000;padding:20px 28px;border-radius:14px;width:90%;max-width:240px;text-align:center;box-shadow:0 0 25px rgba(0,0,0,0.5);">
    <div id="popupMessage" style="font-weight:700;font-size:18px;margin-bottom:18px;"></div>
    <button id="proceedBtn" style="padding:10px 16px;border-radius:10px;border:none;background:#9747FF;color:#fff;font-weight:700;cursor:pointer;">Proceed to Home Page</button>
  </div>
</div>

<div id="loadingOverlay" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,0.8);z-index:90;color:#fff;font-weight:700;text-align:center;font-family: 'Krona One', sans-serif;">
  <div id="loadingText" style="font-size:22px;margin-bottom:10px;">Analyzing Measurements...</div>
  <div id="loadingPercent" style="font-size:48px;color:#9747FF;">0%</div>
</div>


<script src="mediapipe-script.js"></script>

</body>
</html>